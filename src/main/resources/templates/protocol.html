<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Протокол</title>
    <meta charset="UTF-8"></meta>
    <style>
        .center {
            text-align: center;
        }

        body {
            margin-left: 40px;
        }

        p {
            margin: 2px 0;
            font-size: 14px;
        }

        h1 {
            text-align: center;
            font-size: 18px;
            margin: 0;
        }

        h2 {
            text-align: center;
            font-size: 16px;
        }

        h3 {
            font-size: 14px;
        }

        h2, h3 {
            margin-top: 7px;
            margin-bottom: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 12px;
            text-align: center;
        }

        th, td {
            padding: 1px 1px;
            border: 1px solid #111;
        }

        .noBorder {
            border: 0;
        }

        .frac {
            display: inline-block;
            position: relative;
            vertical-align: middle;
            letter-spacing: 0.001em;
            text-align: center;
        }

        .frac > span {
            display: block;
            padding: 0.1em;
        }

        .frac .denominator {
            border-top: 1px solid;
        }
    </style>
</head>
<body>

<div>
    <h1>ПРОТОКОЛ</h1>
    <table class="table">
        <tbody>
        <tr class="noBorder">
            <td class="noBorder" style="text-align: left;"
                th:text="'Дата начала исследования: ' + ${#temporals.format(probe.getStartDate(), 'dd.MM.yyyy')}"></td>
            <td class="noBorder" style="text-align: right;"
                th:text="'Дата окончания исследования: ' + ${#temporals.format(probe.getEndDate(), 'dd.MM.yyyy')}"></td>
        </tr>
        </tbody>
    </table>
    <table class="table">
        <tbody>
        <tr>
            <td th:utext="'Код пробы: ' + ${probe.getCode()}">Код пробы: 312-321</td>
            <td th:utext="'Наименование пробы: ' + ${probe.getName()}">Наименование пробы</td>
        </tr>
        <tr>
            <td th:utext="'Масса пробы теоретическая: ' + ${probe.getMassTheory()}"></td>
            <td th:utext="'Масса пробы фактическая: ' + ${probe.massFact()}">/</td>
        </tr>
        </tbody>
    </table>
    <h2>Исследования</h2>
    <div th:if="${probe.getDrySubstancesResearch()} != null">
        <h3>Сухие вещества, МУ 4237</h3>
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td></td>
                <td>1-ая параллель</td>
                <td>2-ая параллель</td>
            </tr>
            <tr>
                <td>Масса бюксы без навески, г</td>
                <td th:text="${probe.getDrySubstancesResearch().getByuksaParallelFirst()}">100</td>
                <td th:text="${probe.getDrySubstancesResearch().getByuksaParallelSecond()}">100</td>

            </tr>
            <tr>
                <td>Масса навески, г</td>
                <td th:text="${probe.getDrySubstancesResearch().getMassNaveskiParallelFirst()}">100</td>
                <td th:text="${probe.getDrySubstancesResearch().getMassNaveskiParallelSecond()}">100</td>
            </tr>
            <tr>
                <td>Масса бюксы после высушивания, г</td>
                <td th:text="${probe.getDrySubstancesResearch().getByuksaAfterDryingParallelFirst()}">100</td>
                <td th:text="${probe.getDrySubstancesResearch().getByuksaAfterDryingParallelSecond()}">100</td>
            </tr>
            <tr>
                <td>Сухие вещества, г/порц.</td>
                <td>
                    <span class="frac">
                      <span class="numerator"
                            th:text="'(' + ${probe.getDrySubstancesResearch().getByuksaAfterDryingParallelFirst()} + ' - ' + ${probe.getDrySubstancesResearch().getByuksaParallelFirst()} + ')' + ' × ' + ${probe.massFact()}">(10 - 1) × 123</span>
                      <span class="denominator"
                            th:text="${probe.getDrySubstancesResearch().getMassNaveskiParallelFirst()}">20</span>
                    </span>
                    <span th:text="' = ' + ${probe.getDrySubstancesResearch().drySubstancesParallelFirst()}">= 12</span>
                </td>
                <td>
                    <span class="frac">
                      <span class="numerator"
                            th:text="'(' + ${probe.getDrySubstancesResearch().getByuksaAfterDryingParallelSecond()} + ' - ' + ${probe.getDrySubstancesResearch().getByuksaParallelSecond()} + ')' + ' × ' + ${probe.massFact()}">(10 - 1) × 123</span>
                      <span class="denominator"
                            th:text="${probe.getDrySubstancesResearch().getMassNaveskiParallelSecond()}">20</span>
                    </span>
                    <span th:text="' = ' + ${probe.getDrySubstancesResearch().drySubstancesParallelSecond()}">= 12</span>
                </td>
            </tr>
            <tr>
                <td>Сухие вещества средние, г/порц.</td>
                <td colspan="2" th:text="${probe.getDrySubstancesResearch().drySubstancesAverage()}">
                    100+100=200
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div th:if="${probe.getProteinsResearch()} != null">
        <h3>Белки, МУ 4237</h3>
        <table class="table">
            <tbody>
            <tr>
                <td th:utext="'Объём контроля: ' + ${probe.getProteinsResearch().getControlVolume()}"></td>
                <td th:utext="'Коэффициент: ' + ${probe.getProteinsResearch().getCoefficient()}">/</td>
            </tr>
            </tbody>
        </table>
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td></td>
                <td>1-ая параллель</td>
                <td>2-ая параллель</td>
            </tr>
            <tr>
                <td>Масса навески, г</td>
                <td th:text="${probe.getProteinsResearch().getMassNaveskiParallelFirst()}">100</td>
                <td th:text="${probe.getProteinsResearch().getMassNaveskiParallelSecond()}">100</td>
            </tr>
            <tr>
                <td>Объём титранта, см³</td>
                <td th:text="${probe.getProteinsResearch().getTitrantVolumeParallelFirst()}">100</td>
                <td th:text="${probe.getProteinsResearch().getTitrantVolumeParallelSecond()}">100</td>
            </tr>
            <tr>
                <td>Белки, г/порц.</td>
                <td>
                    <span class="frac">
                      <span class="numerator"
                            th:text="'0,0014 × 6,25 × '+ ${probe.getProteinsResearch().getCoefficient()} + ' × ('+ ${probe.getProteinsResearch().getTitrantVolumeParallelFirst()} + ' - ' + ${probe.getProteinsResearch().getControlVolume()} + ') × ' + ${probe.massFact()}">(10 - 1) × 123</span>
                      <span class="denominator" th:text="${probe.getProteinsResearch().getMassNaveskiParallelFirst()}">20</span>
                    </span>
                    <span th:text="' = ' + ${probe.getProteinsResearch().proteinsParallelFirst()}">= 12</span>
                </td>
                <td>
                    <span class="frac">
                      <span class="numerator"
                            th:text="'0,0014 × 6,25 × '+ ${probe.getProteinsResearch().getCoefficient()} + ' × ('+ ${probe.getProteinsResearch().getTitrantVolumeParallelSecond()} + ' - ' + ${probe.getProteinsResearch().getControlVolume()} + ') × ' + ${probe.massFact()}">(10 - 1) × 123</span>
                      <span class="denominator" th:text="${probe.getProteinsResearch().getMassNaveskiParallelSecond()}">20</span>
                    </span>
                    <span th:text="' = ' + ${probe.getProteinsResearch().proteinsParallelSecond()}">= 12</span>
                </td>
            </tr>
            <tr>
                <td>Белки средние, г/порц.</td>
                <td colspan="2" th:text="${probe.getProteinsResearch().proteinsAverage()}">100+100=200</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div th:if="${probe.getFatsResearch()} != null">
        <h3>Жиры, МУ 4237</h3>
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td></td>
                <td>1-ая параллель</td>
                <td>2-ая параллель</td>
            </tr>
            <tr>
                <td>Масса навески, г</td>
                <td th:text="${probe.getFatsResearch().getMassNaveskiParallelFirst()}">100</td>
                <td th:text="${probe.getFatsResearch().getMassNaveskiParallelSecond()}">100</td>
            </tr>
            <tr>
                <td>Масса пустого патрона, г</td>
                <td th:text="${probe.getFatsResearch().getPatronMassEmptyParallelFirst()}">100</td>
                <td th:text="${probe.getFatsResearch().getPatronMassEmptyParallelSecond()}">100</td>

            </tr>
            <tr>
                <td>Масса патрона после экстракции, г</td>
                <td th:text="${probe.getFatsResearch().getPatronMassAfterExtractionParallelFirst()}">100</td>
                <td th:text="${probe.getFatsResearch().getPatronMassAfterExtractionParallelSecond()}">100</td>
            </tr>
            <tr>
                <td>Жиры, г/порц.</td>
                <td>
                    <span class="frac">
                      <span class="numerator"
                            th:text="'(' + ${probe.getFatsResearch().patronMassBeforeExtractionParallelFirst()} + ' - ' + ${probe.getFatsResearch().getPatronMassAfterExtractionParallelFirst()} + ') × ' + ${probe.massFact()}">(10 - 1) × 123</span>
                      <span class="denominator"
                            th:text="${probe.getFatsResearch().getMassNaveskiParallelFirst()}">20</span>
                    </span>
                    <span th:text="' = ' + ${probe.getFatsResearch().fatsParallelFirst()}">= 12</span>
                </td>
                <td>
                    <span class="frac">
                      <span class="numerator"
                            th:text="'(' + ${probe.getFatsResearch().patronMassBeforeExtractionParallelSecond()} + ' - ' + ${probe.getFatsResearch().getPatronMassAfterExtractionParallelSecond()} + ') × ' + ${probe.massFact()}">(10 - 1) × 123</span>
                      <span class="denominator"
                            th:text="${probe.getFatsResearch().getMassNaveskiParallelSecond()}">20</span>
                    </span>
                    <span th:text="' = ' + ${probe.getFatsResearch().fatsParallelSecond()}">= 12</span>
                </td>
            </tr>
            <tr>
                <td>Жиры средние, г/порц.</td>
                <td colspan="2" th:text="${probe.getFatsResearch().fatsAverage()}">100+100=200</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div th:if="${probe.factCarbohydrates()} != null">
        <h3>Углеводы, МУ 4237</h3>
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>Углеводы, г/порц.</td>
                <td th:if="${probe.getType() != probe.getType().THIRD}" th:text="${probe.getDrySubstancesResearch().drySubstancesAverage()} + ' - (' + ${probe.getProteinsResearch().proteinsAverage()} + ' + ' + ${probe.getFatsResearch().fatsAverage()} + ' + ' + ${probe.minerals()} + ')' + ' = ' + ${probe.factCarbohydrates()}">
                    100
                </td>
                <td th:if="${probe.getType() == probe.getType().THIRD}" th:text="${probe.getDrySubstancesResearch().drySubstancesAverage()} + ' - ' + ${probe.minerals()} + ' = ' + ${probe.factCarbohydrates()}">
                    100
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div th:if="${probe.factCaloricity()} != null">
        <h3>Энергетическая ценность, МУ 4237</h3>
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>Энергетическая ценность, ккал/порц.</td>
                <td th:if="${probe.getType() != probe.getType().THIRD}" th:text="'4 × ' + ${probe.getProteinsResearch().proteinsAverage()} + ' + 9 × ' + ${probe.getFatsResearch().fatsAverage()} + ' + 4 × ' + ${probe.factCarbohydrates()} + ' = ' + ${probe.factCaloricity()}">
                    100
                </td>
                <td th:if="${probe.getType() == probe.getType().THIRD}" th:text="'4 × ' + ${probe.factCarbohydrates()} + ' = ' + ${probe.factCaloricity()}">
                    100
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <h2>Результаты</h2>
    <table class="table table-bordered">
        <tbody>
        <tr>
            <td></td>
            <td>Сухие вещества</td>
            <td th:if="${probe.getProteinsResearch()} != null">Белки</td>
            <td th:if="${probe.getFatsResearch()} != null">Жиры</td>
            <td>Углеводы</td>
            <td>Энергетическая ценность</td>
        </tr>
        <tr>
            <td>Теоретические</td>
            <td th:utext="${probe.theoryDrySubstances()}">Сухие вещества</td>
            <td th:if="${probe.getProteinsResearch()} != null" th:utext="${probe.theoryProteins()}">Белки</td>
            <td th:if="${probe.getFatsResearch()} != null" th:utext="${probe.theoryFats()}">Жиры</td>
            <td th:utext="${probe.theoryCarbohydrates()}">Углеводы</td>
            <td th:utext="${probe.theoryCaloricity()}">Энергетическая ценность</td>
        </tr>
        <tr>
            <td>Фактические</td>
            <td th:utext="${probe.getDrySubstancesResearch().drySubstancesAverage()}">Сухие вещества</td>
            <td th:if="${probe.getProteinsResearch()} != null"
                th:utext="${probe.getProteinsResearch().proteinsAverage()}">Белки
            </td>
            <td th:if="${probe.getFatsResearch()} != null" th:utext="${probe.getFatsResearch().fatsAverage()}">Жиры
            </td>
            <td th:utext="${probe.factCarbohydrates()}">Углеводы</td>
            <td th:utext="${probe.factCaloricity()}">Энергетическая ценность</td>
        </tr>
        <tr>
            <td>% отклонения</td>
            <td th:utext="${probe.drySubstancesDifference()}">Сухие вещества</td>
            <td th:if="${probe.getProteinsResearch()} != null" th:utext="${probe.proteinsDifference()}">Белки</td>
            <td th:if="${probe.getFatsResearch()} != null" th:utext="${probe.fatsDifference()}">Жиры</td>
            <td th:utext="${probe.carbohydratesDifference()}">Углеводы</td>
            <td th:utext="${probe.caloricityDifference()}">Энергетическая ценность</td>
        </tr>
        </tbody>
    </table>
    <table class="table">
        <tbody>
        <tr class="noBorder">
            <td class="noBorder">Исполнитель:</td>
            <td class="noBorder">_________________</td>
            <td class="noBorder">_________________________________________________________________</td>
        </tr>
        <tr class="noBorder">
            <td class="noBorder"></td>
            <td class="noBorder">(подпись)</td>
            <td class="noBorder">(Ф.И.О.)</td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>